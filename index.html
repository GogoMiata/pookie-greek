<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pookie's Greek — 30-day Mini-Course</title>
  <meta name="description" content="30-day conversational Greek course for Jade (Pookie). Installable on iPhone (Add to Home Screen)." />
  <!-- iOS home-screen icon (put apple-touch-icon.png in same folder) -->
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <meta name="apple-mobile-web-app-title" content="Pookie's Greek">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <style>
    :root{--bg:#071428;--card:rgba(255,255,255,0.03);--accent:#f59e0b;--text:#e6eef8;--muted:#9ca3af}
    *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{margin:0;background:linear-gradient(180deg,#02203b,#071428);color:var(--text);-webkit-font-smoothing:antialiased}
    header{padding:18px;text-align:center}
    h1{margin:0;font-size:20px}
    .container{max-width:920px;margin:14px auto;padding:12px}
    .card{background:var(--card);border-radius:12px;padding:12px;margin-bottom:12px}
    .row{display:flex;gap:8px;align-items:center}
    button, .btn {background:var(--accent);border:none;padding:10px 12px;border-radius:10px;color:#081129;font-weight:600;cursor:pointer}
    .lesson-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px}
    .lesson-item{padding:12px;background:rgba(255,255,255,0.02);border-radius:10px;cursor:pointer}
    .vocab-list{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .vocab{padding:8px;background:rgba(255,255,255,0.01);border-radius:8px;display:flex;align-items:center}
    .play{background:#072a2a;color:#b6f7f7;padding:8px;border-radius:8px;margin-left:auto;cursor:pointer}
    footer{padding:10px;text-align:center;color:var(--muted);font-size:13px}
    .small{font-size:13px;color:var(--muted)}
    input[type="text"]{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);width:100%;background:transparent;color:var(--text)}
    .dialog-card{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;margin-top:8px}
    .nav-row{display:flex;gap:8px;justify-content:space-between;align-items:center;margin-top:12px}
    a.link{color:var(--accent);text-decoration:none;font-weight:600}
    .hidden{display:none}
    @media (max-width:420px){.vocab-list{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <h1>Pookie's Greek — 30-day Mini-Course</h1>
    <div class="small">20 minutes/day — tap a day to begin. Use Safari on iPhone to Add to Home Screen.</div>
  </header>

  <main class="container">
    <div id="app"></div>
    <div id="lessonCard" class="card hidden"></div>
  </main>

  <footer>Made with ❤️ — Happy Anniversary, Jade & Pookie.</footer>

<script>
/* ===== FULL 30-DAY LESSON DATA =====
   Each lesson: { day, title, items: [ {gr, tr, en}... ], dialog: [ {a,b}, ... ] }
*/
const lessons = [
  {day:1,title:"Greetings",items:[
    {gr:"Γειά σου",tr:"Geiá sou",en:"Hello (informal)"},
    {gr:"Γειά σας",tr:"Geiá sas",en:"Hello (formal/plural)"},
    {gr:"Καλημέρα",tr:"Kaliméra",en:"Good morning"},
    {gr:"Καλησπέρα",tr:"Kalispera",en:"Good evening"},
    {gr:"Καληνύχτα",tr:"Kaliníkhta",en:"Good night"}
  ],dialog:[
    {a:"Γειά σου!",b:"Γειά σου! Πώς είσαι;"}
  ]},
  {day:2,title:"Politeness",items:[
    {gr:"Ευχαριστώ",tr:"Efcharistó",en:"Thank you"},
    {gr:"Παρακαλώ",tr:"Parakaló",en:"Please / You're welcome"},
    {gr:"Συγγνώμη",tr:"Signómi",en:"Sorry / Excuse me"}
  ],dialog:[{a:"Ευχαριστώ!",b:"Παρακαλώ!"}]},
  {day:3,title:"Names",items:[
    {gr:"Με λένε...",tr:"Me léne...",en:"My name is..."},
    {gr:"Πώς σε λένε;",tr:"Pós se léne?",en:"What's your name?"},
    {gr:"Χάρηκα",tr:"Chárika",en:"Nice to meet you"}
  ],dialog:[{a:"Με λένε Μαρία.",b:"Χάρηκα, εγώ είμαι η Άννα."}]},
  {day:4,title:"How are you?",items:[
    {gr:"Τι κάνεις;",tr:"Ti káneis?",en:"How are you?"},
    {gr:"Καλά",tr:"Kalá",en:"Good"},
    {gr:"Έτσι κι έτσι",tr:"Étsi ki étsi",en:"So-so"},
    {gr:"Κακός/Κακή",tr:"Kakós/Kakí",en:"Bad (m/f)"}
  ],dialog:[{a:"Τι κάνεις;",b:"Καλά, ευχαριστώ."}]},
  {day:5,title:"Where are you from?",items:[
    {gr:"Από πού είσαι;",tr:"Apó poú eísai?",en:"Where are you from?"},
    {gr:"Είμαι από...",tr:"Eímai apó...",en:"I am from..."},
    {gr:"Ελλάδα",tr:"Elláda",en:"Greece"},
    {gr:"Αμερική",tr:"Amerikí",en:"America / USA"}
  ],dialog:[{a:"Από πού είσαι;",b:"Είμαι από την Αμερική."}]},
  {day:6,title:"Family basics",items:[
    {gr:"Μαμά",tr:"Mamá",en:"Mom"},
    {gr:"Μπαμπάς",tr:"Bampás",en:"Dad"},
    {gr:"Αδερφός",tr:"Aderfós",en:"Brother"},
    {gr:"Αδερφή",tr:"Aderfí",en:"Sister"}
  ],dialog:[{a:"Ποια είναι αυτή;",b:"Η αδερφή μου."}]},
  {day:7,title:"Week 1 Review",items:[],dialog:[]},

  {day:8,title:"Food basics",items:[
    {gr:"Νερό",tr:"Neró",en:"Water"},
    {gr:"Ψωμί",tr:"Psomí",en:"Bread"},
    {gr:"Καφές",tr:"Kafés",en:"Coffee"},
    {gr:"Τσάι",tr:"Tsái",en:"Tea"},
    {gr:"Κρασί",tr:"Krasí",en:"Wine"}
  ],dialog:[{a:"Θα ήθελα έναν καφέ, παρακαλώ.",b:"Σας φέρνω έναν καφέ."}]},
  {day:9,title:"Ordering politely",items:[
    {gr:"Θα ήθελα...",tr:"Tha íthela...",en:"I would like..."},
    {gr:"Μπορώ να έχω...;",tr:"Boró na ého...?",en:"Can I have...?"},
    {gr:"Λογαριασμό, παρακαλώ",tr:"Logariasmó, parakaló",en:"The bill, please"}
  ],dialog:[{a:"Τι θα θέλατε;",b:"Θα ήθελα ένα σάντουιτς."}]},
  {day:10,title:"Numbers 1–10",items:[
    {gr:"Ένα",tr:"Éna",en:"1"},{gr:"Δύο",tr:"Dýo",en:"2"},{gr:"Τρία",tr:"Tría",en:"3"},
    {gr:"Τέσσερα",tr:"Téssera",en:"4"},{gr:"Πέντε",tr:"Pénte",en:"5"},{gr:"Έξι",tr:"Éxi",en:"6"},
    {gr:"Επτά",tr:"Eptá",en:"7"},{gr:"Οκτώ",tr:"Októ",en:"8"},{gr:"Εννιά",tr:"Enniá",en:"9"},{gr:"Δέκα",tr:"Déka",en:"10"}
  ],dialog:[{a:"Θα ήθελα δύο καφέδες.",b:"Ορίστε δύο καφέδες."}]},
  {day:11,title:"Shopping phrases",items:[
    {gr:"Πόσο κοστίζει;",tr:"Póso kostízei?",en:"How much is it?"},
    {gr:"Ακριβό",tr:"Akrivó",en:"Expensive"},
    {gr:"Φτηνό",tr:"Ftínio",en:"Cheap"}
  ],dialog:[{a:"Πόσο κοστίζει;",b:"Κοστίζει δέκα ευρώ."}]},
  {day:12,title:"Directions 1",items:[
    {gr:"Πού είναι...;",tr:"Poú eínai...?",en:"Where is...?"},
    {gr:"Δεξιά",tr:"Dexiá",en:"Right"},
    {gr:"Αριστερά",tr:"Aristerá",en:"Left"},
    {gr:"Ευθεία",tr:"Eutheía",en:"Straight"}
  ],dialog:[{a:"Πού είναι η τουαλέτα;",b:"Εκεί δεξιά."}]},
  {day:13,title:"Directions 2",items:[
    {gr:"Κοντά",tr:"Kontá",en:"Near"},{gr:"Μακριά",tr:"Makriá",en:"Far"},
    {gr:"Εδώ",tr:"Edó",en:"Here"},{gr:"Εκεί",tr:"Ekeí",en:"There"}
  ],dialog:[{a:"Είναι κοντά;",b:"Ναι, πολύ κοντά."}]},
  {day:14,title:"Week 2 Review",items:[],dialog:[]},

  {day:15,title:"Small talk: weather",items:[
    {gr:"Ο καιρός",tr:"O kairós",en:"The weather"},
    {gr:"Είναι ζεστό",tr:"Eínai zestó",en:"It's hot"},
    {gr:"Είναι κρύο",tr:"Eínai krýo",en:"It's cold"}
  ],dialog:[{a:"Τι καιρό έχουμε;",b:"Έχει ηλιοφάνεια."}]},
  {day:16,title:"Feelings",items:[
    {gr:"Χαρούμενη",tr:"Charoúmeni",en:"Happy (f)"},
    {gr:"Κουρασμένη",tr:"Kourasméni",en:"Tired (f)"},
    {gr:"Πεινασμένη",tr:"Peinasméni",en:"Hungry (f)"}
  ],dialog:[{a:"Πώς νιώθεις;",b:"Είμαι κουρασμένη."}]},
  {day:17,title:"Time basics",items:[
    {gr:"Τι ώρα είναι;",tr:"Ti óra eínai?",en:"What time is it?"},
    {gr:"Πρωί",tr:"Proí",en:"Morning"},
    {gr:"Μεσημέρι",tr:"Mesiméri",en:"Noon"},
    {gr:"Βράδυ",tr:"Vrády",en:"Evening"}
  ],dialog:[{a:"Τι ώρα είναι;",b:"Είναι δύο το μεσημέρι."}]},
  {day:18,title:"Visiting someone",items:[
    {gr:"Καλώς ήρθες",tr:"Kalós írthes",en:"Welcome"},
    {gr:"Περάστε",tr:"Peráste",en:"Come in"},
    {gr:"Σπίτι",tr:"Spíti",en:"House"}
  ],dialog:[{a:"Καλώς ήρθατε!",b:"Σας ευχαριστούμε που ήρθατε."}]},
  {day:19,title:"Compliments",items:[
    {gr:"Ωραίο",tr:"Oraío",en:"Nice"},
    {gr:"Μου αρέσει",tr:"Mou arései",en:"I like it"},
    {gr:"Πολύ όμορφο",tr:"Polý ómorfo",en:"Very beautiful"}
  ],dialog:[{a:"Μου αρέσει το φόρεμά σου.",b:"Ευχαριστώ!"}]},
  {day:20,title:"Plans",items:[
    {gr:"Τι κάνεις αύριο;",tr:"Ti káneis ávrio?",en:"What are you doing tomorrow?"},
    {gr:"Θα πάω",tr:"Tha páo",en:"I will go"},
    {gr:"Στην αγορά",tr:"Stin agorá",en:"To the market"}
  ],dialog:[{a:"Τι κάνεις αύριο;",b:"Θα πάω στο παζάρι."}]},
  {day:21,title:"Week 3 Review",items:[],dialog:[]},

  {day:22,title:"Meals with family",items:[
    {gr:"Φαγητό",tr:"Faghtó",en:"Food"},
    {gr:"Δείπνο",tr:"Deípno",en:"Dinner"},
    {gr:"Γλυκό",tr:"Glykó",en:"Dessert"}
  ],dialog:[{a:"Θέλεις λίγο ψωμί;",b:"Ναι, παρακαλώ."}]},
  {day:23,title:"Asking for help",items:[
    {gr:"Μπορείς να με βοηθήσεις;",tr:"Borís na me voithíseis?",en:"Can you help me?"},
    {gr:"Φυσικά",tr:"Fysiká",en:"Of course"}
  ],dialog:[{a:"Μπορείς να με βοηθήσεις με αυτό;",b:"Φυσικά, πες μου."}]},
  {day:24,title:"Describing things",items:[
    {gr:"Μεγάλο",tr:"Megálo",en:"Big"},
    {gr:"Μικρό",tr:"Mikrό",en:"Small"},
    {gr:"Καινούριο",tr:"Kainoúrio",en:"New"}
  ],dialog:[{a:"Το σπίτι είναι μεγάλο.",b:"Ναι, έχει τρεις κρεβατοκάμαρες."}]},
  {day:25,title:"People & relationships",items:[
    {gr:"Φίλος",tr:"Fílos",en:"Friend"},
    {gr:"Γείτονας",tr:"Geítonas",en:"Neighbor"},
    {gr:"Συγγενής",tr:"Syggenís",en:"Relative"}
  ],dialog:[{a:"Αυτός είναι ο φίλος μου.",b:"Χαίρω πολύ."}]},
  {day:26,title:"Talking about the past",items:[
    {gr:"Χθες",tr:"Chthes",en:"Yesterday"},
    {gr:"Προχθές",tr:"Prochthes",en:"Day before yesterday"},
    {gr:"Ήμουν",tr:"Ímoun",en:"I was"}
  ],dialog:[{a:"Τι έκανες χθες;",b:"Ήμουν με την οικογένεια."}]},
  {day:27,title:"Future intentions",items:[
    {gr:"Αύριο",tr:"Ávrio",en:"Tomorrow"},
    {gr:"Θα...",tr:"Tha...",en:"Will..."},
    {gr:"Θέλω να...",tr:"Thélo na...",en:"I want to..."}
  ],dialog:[{a:"Τι θα κάνεις αύριο;",b:"Θα εργαστώ και μετά θα πάω σπίτι."}]},
  {day:28,title:"Special occasions",items:[
    {gr:"Γενέθλια",tr:"Genéthlia",en:"Birthday"},
    {gr:"Γιορτή",tr:"Giortí",en:"Name day/celebration"},
    {gr:"Καλή χρονιά",tr:"Kalí chroniá",en:"Happy new year"}
  ],dialog:[{a:"Χρόνια πολλά!",b:"Ευχαριστώ πολύ!"}]},
  {day:29,title:"Full review",items:[],dialog:[]},
  {day:30,title:"Final recap & celebration",items:[],dialog:[]}
];

/* ====== APP UI ====== */
const app = document.getElementById('app');
const lessonCard = document.getElementById('lessonCard');

function renderHome() {
  app.innerHTML = '';
  const card = elt('div','card');
  card.innerHTML = `<div class="row"><div style="flex:1"><strong class="big">30-day plan</strong><div class="small">Tap a day to open a short 20-min lesson</div></div><button id="startBtn" class="btn">Start Day 1</button></div>`;
  app.appendChild(card);

  const list = elt('div','lesson-list');
  lessons.forEach(l => {
    const it = elt('div','lesson-item');
    it.innerHTML = `<div><strong>Day ${l.day}</strong></div><div class="small">${l.title}</div><div class="small" style="margin-top:8px">Tap to open</div>`;
    it.onclick = () => openLesson(l.day);
    list.appendChild(it);
  });
  app.appendChild(list);

  document.getElementById('startBtn').onclick = () => openLesson(1);
}

function openLesson(day) {
  const l = lessons.find(x => x.day === day);
  lessonCard.classList.remove('hidden');
  lessonCard.innerHTML = '';
  const header = elt('div','row');
  header.innerHTML = `<div style="flex:1"><strong>Day ${l.day} — ${l.title || 'Review'}</strong><div class="small">~20 minutes (10 vocab / 8 dialog / 5 quiz)</div></div><div><button id="closeBtn" class="btn">Home</button></div>`;
  lessonCard.appendChild(header);
  document.getElementById('closeBtn').onclick = () => { lessonCard.classList.add('hidden'); lessonCard.innerHTML=''; };

  // Vocabulary
  if (l.items && l.items.length) {
    const vcard = elt('div','card');
    vcard.innerHTML = `<div class="small">Vocabulary (${l.items.length})</div><div class="vocab-list" id="vocab${day}"></div>`;
    lessonCard.appendChild(vcard);
    const listEl = vcard.querySelector('#vocab'+day);
    l.items.forEach(it => {
      const ve = elt('div','vocab');
      ve.innerHTML = `<div style="flex:1"><div style="font-weight:700">${it.gr}</div><div class="small">${it.tr} — ${it.en}</div></div><button class="play">🔊</button>`;
      listEl.appendChild(ve);
      ve.querySelector('.play').onclick = () => speak(it.gr);
      ve.onclick = (e) => { if(e.target.className !== 'play') showExample(it); };
    });
  }

  // Dialogue
  if (l.dialog && l.dialog.length) {
    const dcard = elt('div','card');
    dcard.innerHTML = `<div class="small">Dialogue practice</div>`;
    lessonCard.appendChild(dcard);
    l.dialog.forEach((d, idx) => {
      const p = elt('div','dialog-card');
      p.innerHTML = `<div><strong>Person A:</strong> ${d.a}</div><div style="margin-top:6px"><strong>Person B:</strong> ${d.b}</div>
        <div class="row" style="margin-top:8px">
          <button class="play" id="play-${day}-${idx}">Play dialogue</button>
          <button class="btn" id="rec-${day}-${idx}" style="margin-left:8px">Record & playback</button>
        </div>`;
      dcard.appendChild(p);
      document.getElementById(`play-${day}-${idx}`).onclick = () => { speak(d.a); setTimeout(()=>speak(d.b),1400); };
      // Record & playback: simple browser recording
      document.getElementById(`rec-${day}-${idx}`).onclick = () => recordAndPlay(d.a + ' ' + d.b);
    });
  }

  // Quick quiz
  const qcard = elt('div','card');
  qcard.innerHTML = `<div class="small">Quick 5-question quiz (type the English translation)</div><div id="quizArea"></div><div style="margin-top:8px"><button id="check" class="btn">Check answers</button> <button id="next-day" class="btn" style="margin-left:8px">Next day</button></div><div class="small" id="score" style="margin-top:8px"></div>`;
  lessonCard.appendChild(qcard);
  buildQuiz(l, qcard.querySelector('#quizArea'));
  document.getElementById('check').onclick = () => {
    const inputs = qcard.querySelectorAll('input');
    let score = 0;
    inputs.forEach(inp => {
      const ans = inp.getAttribute('data-answer').toLowerCase().trim();
      const val = (inp.value||'').toLowerCase().trim();
      if (!ans) return;
      if (val && (val === ans || ans.includes(val) || val.includes(ans))) score++;
    });
    qcard.querySelector('#score').innerText = `Score: ${score}/${inputs.length}`;
  };
  document.getElementById('next-day').onclick = () => {
    const next = Math.min(30, day+1);
    openLesson(next);
    window.scrollTo(0,0);
  };

  // Navigation: prev/next buttons at bottom
  const nav = elt('div','nav-row');
  const prevBtn = elt('button','btn'); prevBtn.innerText = 'Prev'; prevBtn.onclick = () => openLesson(Math.max(1,day-1));
  const homeBtn = elt('button','btn'); homeBtn.innerText = 'Home'; homeBtn.onclick = () => { lessonCard.classList.add('hidden'); lessonCard.innerHTML=''; };
  const nextBtn = elt('button','btn'); nextBtn.innerText = 'Next'; nextBtn.onclick = () => openLesson(Math.min(30,day+1));
  nav.appendChild(prevBtn); nav.appendChild(homeBtn); nav.appendChild(nextBtn);
  lessonCard.appendChild(nav);
}

function buildQuiz(lesson, container) {
  container.innerHTML = '';
  const items = lesson.items || [];
  for (let i=0;i<5;i++){
    const it = items[i % (items.length || 1)];
    const qi = elt('div');
    qi.className = 'small';
    const ans = it ? it.en : '';
    qi.innerHTML = `<div style="margin-top:8px">Translate to English: <strong>${it ? it.gr : '—'}</strong></div><input type="text" data-answer="${escapeHtml(ans)}" />`;
    container.appendChild(qi);
  }
}

function showExample(item) {
  // small modal-like temporary popup (alert fallback)
  const txt = `${item.gr} — ${item.tr}\nMeaning: ${item.en}`;
  if (confirm(`${txt}\n\nPress OK to hear it.`)) speak(item.gr);
}

function speak(text){
  if('speechSynthesis' in window){
    const ut = new SpeechSynthesisUtterance(text);
    ut.lang = 'el-GR';
    // attempt to choose a Greek voice if available
    const voices = speechSynthesis.getVoices();
    const greek = voices.find(v => v.lang && v.lang.startsWith('el'));
    if (greek) ut.voice = greek;
    // fallback: set a sensible rate for clarity
    ut.rate = 0.95;
    speechSynthesis.cancel();
    speechSynthesis.speak(ut);
  } else {
    alert('TTS not supported in this browser.');
  }
}

/* recording helper: uses MediaRecorder if available, otherwise plays phrase with TTS */
async function recordAndPlay(text) {
  if (!navigator.mediaDevices || !window.MediaRecorder) {
    // simple fallback: play the lines with TTS
    speak(text);
    return;
  }
  try {
    const stream = await navigator.mediaDevices.getUserMedia({audio:true});
    const recorder = new MediaRecorder(stream);
    const chunks = [];
    recorder.ondataavailable = e => chunks.push(e.data);
    recorder.onstop = async () => {
      const blob = new Blob(chunks, {type:'audio/webm'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('audio');
      a.src = url; a.controls = true; a.autoplay = true;
      // small user-notice
      alert('Playing your recording now. Press OK to hear the original phrase.');
      speak(text);
      // release
      setTimeout(()=>{ URL.revokeObjectURL(url); if(stream) stream.getTracks().forEach(t=>t.stop()); }, 60000);
    };
    alert('Press OK to start 5-second recording; speak after the beep.');
    recorder.start();
    // beep
    const ctx = new (window.AudioContext||window.webkitAudioContext)();
    const o = ctx.createOscillator(); o.type='sine'; o.frequency.value=880;
    const g = ctx.createGain(); g.gain.value = 0.00001;
    o.connect(g); g.connect(ctx.destination);
    g.gain.exponentialRampToValueAtTime(0.2, ctx.currentTime + 0.01);
    o.start();
    setTimeout(()=>{ g.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime + 0.1); o.stop(); }, 120);
    await wait(5000);
    recorder.stop();
  } catch (e) {
    console.error(e);
    alert('Recording failed or permission denied. Playing phrase instead.');
    speak(text);
  }
}

/* helpers */
function elt(tag, cls){ const e = document.createElement(tag); if (cls) e.className = cls; return e; }
function escapeHtml(s){ return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
function wait(ms){ return new Promise(res=>setTimeout(res, ms)); }

/* init */
renderHome();

</script>
</body>
</html>
